self.addEventListener("message",function(e){var t=e.data;if(!(t&&t.cmd&&t.pckg))return;var n=function(e,t,n){self.postMessage({cmd:e,status:t,result:n})};if(t.cmd=="inittrie"){if(!self._trie){try{self._trie=new self.data.$Trie(t.pckg.data);n(t.cmd,"success")}catch(r){n(t.cmd,"error",r.message)}}}else if(t.cmd=="findmatches"){if(self._trie){if(t.pckg.query&&t.pckg.max){var i=self._trie.findMatches(t.pckg.query,t.pckg.max);n(t.cmd,"success",i)}else{n(t.cmd,"error","invalid input")}}else{n(t.cmd,"error","trie not ready yet")}}},false);(function(){var e=self;e.data=e.data||{};e.data.$Trie=function(e){function n(e){t.data=e;t.root={};r()}function r(){var e,n=t.data.length;for(e=0;e<n;++e){var r=t.data[e].name.toLowerCase(),i=r.length;var s,o=t.root;for(s=0;s<i;++s){var u=r.charAt(s);if(!o[u]){o[u]={}}o=o[u]}o.__data=t.data[e]}}function i(e,t){var n=[];for(var r in t){if(r!=="__data"&&t.hasOwnProperty(r)){var s=i(r,t[r]);for(var o=0;o<s.length;++o){n.push(s[o])}}}return n.length>0?n:[t.__data.name+" ("+t.__data.ticker+")"]}var t=this;n(arguments[0]&&arguments[0].constructor===Array?arguments[0]:[]);t.findMatches=function(e,t){var n=[],r="";var s=this.root,o;e=e.toLowerCase();for(var u=0;u<e.length;++u){o=e.charAt(u);s=s[o];if(!s){return[]}}if(s){n=i(o,s)}return typeof (t!=undefined&&t<n.length)?n.slice(0,t):n}}})()